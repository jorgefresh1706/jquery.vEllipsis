!function(t){t.fn.vEllipsis=function(e){function a(e,a){var i=t(e);if(i.is(":visible")){var l;if(i.data("lastHeight")&&i.data("lastHeight")===i.height()&&i.data("lastWidth")===i.width()&&i.data("lastText")===i.text())return;i.data("originalText")?(l=i.data("originalText"),i.text(l)):(l=i.text(),i.data("originalText",l));var n,s=i.attr("class").split(/\s+/),c=a.lines,d=new RegExp("^"+a.linesClass+"-(\\d+)$");t.each(s,function(t,e){n=e.match(d),null!==n&&(c=Number(n[1]))});var r=l,h=r.length,o=i.height();i.text("a");var u=parseFloat(i.css("lineHeight"),10),g=i.height(),v=u>g?u-g:0,f=v*(c-1)+g*c;if(f>=o)return i.text(l),i.data("lastText",l),i.data("lastHeight",i.height()),i.data("lastWidth",i.width()),void a.callback.call(e);var x=(f+g)/(o-(g+v));x>1&&(x=1);var p=Math.ceil(x*h);l=l.slice(0,p);var m=a["char"];if(a.additionalEnding&&i.data("link")){var T=i.data("link");i.html(T),m+=" "+i.text()}for(var E=1===c?0:Math.ceil(p/2),k=0,w=p-1;E+a.tolerance-1<w;)k=Math.ceil((E+w)/2),i.text(l.slice(0,k)+m),i.height()<=f?E=k:w=k-a.tolerance;l=l.slice(0,E),a.onlyFullWords&&(l=l.replace(/\s([^\s.]+)$/,"")),l=l.replace(/([:.,\s]+$)/g,""),l+=a["char"],i.text(l),a.additionalEnding&&i.data("link")&&i.append(" "+T),i.data("lastText",l),i.data("lastHeight",i.height()),i.data("lastWidth",i.width()),a.callback.call(e)}}function i(){t(e.element).each(function(){a(this,e)})}function l(){clearTimeout(n),n=setTimeout(function(){i()},e.delay)}var n,s={element:".v-ellipsis",lines:1,onlyFullWords:!1,"char":"...",callback:function(){},responsive:!1,tolerance:5,delay:500,elementEvent:"change",additionalEnding:!1,linesClass:"v-ellipsis-lines"};return e=t.extend(s,e),e.tolerance<1&&(e.tolerance=1),e.responsive&&t(window).resize(function(){l()}),t(document).on(e.elementEvent,e.element,function(){a(this,e)}),i(),this}}(jQuery);
